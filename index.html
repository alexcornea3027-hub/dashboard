<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>VCB | EXECUTIVE DASHBOARD</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js" } }
    </script>
    <style>
        :root {
            --bg: #0b0d11; --card: #161a21;
            --soft-mint: #98ffcc; --soft-gold: #f3d299; --soft-blue: #a3daff;
            --text-main: #f8fafc; --text-dim: #94a3b8; --border: rgba(255,255,255,0.06);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text-main); height: 100vh; overflow: hidden; }

        .app { display: grid; grid-template-rows: 70px 180px 1fr 280px; gap: 15px; padding: 18px; height: 100vh; }

        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; background: var(--card); border-radius: 14px; padding: 0 30px; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .logo { font-weight: 800; font-size: 1.3rem; letter-spacing: 1px; color: var(--soft-gold); }
        .target-pill { background: rgba(152, 255, 204, 0.08); border: 1px solid rgba(152, 255, 204, 0.2); color: var(--soft-mint); padding: 6px 18px; border-radius: 8px; font-weight: 700; font-size: 0.85rem; }
        
        .timer-zone { display: flex; align-items: center; gap: 18px; }
        #hg-canvas { width: 45px; height: 45px; }
        #clock { font-size: 1.6rem; font-weight: 700; letter-spacing: 2px; }

        /* KPI ROW */
        .kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .kpi-box { background: var(--card); border-radius: 14px; border: 1px solid var(--border); padding: 22px; display: flex; align-items: center; justify-content: space-between; position: relative; overflow: hidden; }
        .kpi-box::after { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--accent); opacity: 0.6; }
        .kpi-label { font-size: 0.75rem; text-transform: uppercase; color: var(--text-dim); letter-spacing: 1.5px; margin-bottom: 6px; font-weight: 600; }
        .kpi-value { font-size: 2.6rem; font-weight: 800; line-height: 1; color: #fff; }
        .chart-container { width: 100px; height: 100px; }

        /* GRAPHS */
        .mid-grid { display: grid; grid-template-columns: 1.3fr 1fr; gap: 15px; min-height: 0; }
        .panel { background: var(--card); border-radius: 14px; border: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; }
        .panel-title { font-size: 0.8rem; font-weight: 700; color: var(--soft-gold); text-transform: uppercase; margin-bottom: 15px; letter-spacing: 1px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }

        /* LISTS */
        .bottom-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 15px; min-height: 0; }
        .scroll-area { overflow-y: auto; padding-right: 8px; }
        .scroll-area::-webkit-scrollbar { width: 3px; }
        .scroll-area::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); }

        .task-card { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: rgba(255,255,255,0.02); border-radius: 10px; margin-bottom: 8px; border: 1px solid transparent; transition: 0.3s; }
        .task-card.ready { border-left: 4px solid var(--soft-mint); background: rgba(152, 255, 204, 0.04); }
        .status-badge { font-size: 0.65rem; font-weight: 800; padding: 5px 12px; border-radius: 5px; text-transform: uppercase; letter-spacing: 0.5px; }
        .bg-done { background: var(--soft-mint); color: #0f172a; }
        .bg-wait { background: #242933; color: #94a3b8; }
    </style>
</head>
<body>

<div class="app">
    <header class="header">
        <div class="logo">STOCKTEAM <span style="font-weight:300">| VCB</span></div>
        <div class="target-pill">DAILY TARGET: 1,193 LOCATIONS</div>
        <div class="timer-zone">
            <div id="hg-canvas"></div>
            <div id="clock">12:00:00</div>
        </div>
    </header>

    <div class="kpi-row">
        <div class="kpi-box" style="--accent: var(--soft-mint)">
            <div><div class="kpi-label">LOCAȚII NUMĂRATE</div><div class="kpi-value">1,186</div><p style="color:var(--soft-mint); font-size:0.75rem; margin-top:5px;">99% din target</p></div>
            <div id="c1" class="chart-container"></div>
        </div>
        <div class="kpi-box" style="--accent: var(--soft-gold)">
            <div><div class="kpi-label">TASK-URI ZILNICE</div><div class="kpi-value">1/5</div><p style="color:var(--soft-gold); font-size:0.75rem; margin-top:5px;">20% Finalizate</p></div>
            <div id="c2" class="chart-container"></div>
        </div>
        <div class="kpi-box" style="--accent: var(--soft-blue)">
            <div><div class="kpi-label">WEEKLY STRATEGIC</div><div class="kpi-value">1/3</div><p style="color:var(--soft-blue); font-size:0.75rem; margin-top:5px;">33% Progres</p></div>
            <div id="c3" class="chart-container"></div>
        </div>
    </div>

    <div class="mid-grid">
        <div class="panel"><div class="panel-title">Productivitate per Zonă</div><div id="bars-3d" style="flex:1"></div></div>
        <div class="panel"><div class="panel-title">Trend Volum (W30-W34)</div><div id="trend-3d" style="flex:1"></div></div>
    </div>

    <div class="bottom-grid">
        <div class="panel">
            <div class="panel-title">Daily Operations Feed</div>
            <div class="scroll-area" id="list-daily"></div>
        </div>
        <div class="panel">
            <div class="panel-title">Weekly Strategic Feed</div>
            <div class="scroll-area" id="list-weekly"></div>
        </div>
    </div>
</div>

<script type="module">
    import * as THREE from 'three';

    const db = {
        daily: [
            {t: "Aged stock report 7AM", s: "DONE"}, {t: "Aged stock report 3PM", s: "WAIT"},
            {n: "ADJUSTMENTS (Returns)", s: "WAIT"}, {n: "PI 1st count", s: "WAIT"}, {n: "SLA update", s: "WAIT"}
        ],
        weekly: [{t: "Period Shrinkage", s: "DONE"}, {t: "SIS report", s: "WAIT"}, {t: "Weekly ORM", s: "WAIT"}]
    };

    // CHART-URI NORMALE 3D (TORUS CU ANIMATIE FINĂ)
    function createChart(id, color, pct) {
        const el = document.getElementById(id);
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(100, 100); el.appendChild(renderer.domElement);

        const group = new THREE.Group();
        const arc = (pct/100) * Math.PI * 2;
        const main = new THREE.Mesh(new THREE.TorusGeometry(10, 2.5, 16, 100, arc), new THREE.MeshStandardMaterial({ color: color, roughness: 0.3, metalness: 0.6 }));
        main.rotation.z = Math.PI / 2;
        
        const ghost = new THREE.Mesh(new THREE.TorusGeometry(10, 2.5, 16, 100), new THREE.MeshBasicMaterial({ color: 0x333b45, transparent: true, opacity: 0.15 }));
        group.add(main, ghost); scene.add(group);

        scene.add(new THREE.AmbientLight(0xffffff, 1));
        const pl = new THREE.PointLight(0xffffff, 80); pl.position.set(10,10,10); scene.add(pl);
        camera.position.z = 28;

        function anim() { 
            requestAnimationFrame(anim); 
            group.rotation.y += 0.008; 
            group.position.y = Math.sin(Date.now()*0.002)*0.5; // Efect de plutire
            renderer.render(scene, camera); 
        }
        anim();
    }

    // CLEPSIDRĂ CU PARTICULE (ANIMATIE FLUIDĂ)
    function initHG() {
        const el = document.getElementById('hg-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(45, 45); el.appendChild(renderer.domElement);

        const geo = new THREE.ConeGeometry(2, 3, 4);
        const mat = new THREE.MeshStandardMaterial({ color: 0xf3d299, wireframe: true });
        const top = new THREE.Mesh(geo, mat);
        const btm = new THREE.Mesh(geo, mat);
        btm.rotation.x = Math.PI; btm.position.y = -3;
        const group = new THREE.Group(); group.add(top, btm); scene.add(group);

        camera.position.z = 10;
        function anim() { requestAnimationFrame(anim); group.rotation.y += 0.03; renderer.render(scene, camera); }
        anim();
    }

    function renderTasks() {
        const dL = document.getElementById('list-daily');
        const wL = document.getElementById('list-weekly');
        const draw = (list) => list.map(t => `<div class="task-card ${t.s==='DONE'?'ready':''}"><span>${t.t || t.n}</span><span class="status-badge ${t.s==='DONE'?'bg-done':'bg-wait'}">${t.s}</span></div>`).join('');
        dL.innerHTML = draw(db.daily);
        wL.innerHTML = draw(db.weekly);
    }

    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString('ro-RO'); }, 1000);

    window.onload = () => {
        createChart('c1', 0x98ffcc, 99);
        createChart('c2', 0xf3d299, 20);
        createChart('c3', 0xa3daff, 33);
        initHG();
        renderTasks();
    };
</script>
</body>
</html>
