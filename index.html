<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockTeam VCB | Live Target Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;600;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #020408;
            --card: #0b0e14;
            --gold: #ff9f43;
            --target-green: #2ed573;
            --daily-red: #ff4757;
            --weekly-blue: #54a0ff;
            --text-main: #ffffff;
            --text-dim: #747d8c;
            --border: rgba(255, 255, 255, 0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 1vh 1vw;
        }

        /* HEADER */
        header {
            height: 8vh;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            padding: 0 1vw;
            margin-bottom: 1vh;
        }
        .logo h1 { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; letter-spacing: 2px; color: var(--gold); }
        .logo span { font-size: 0.7rem; color: var(--text-dim); text-transform: uppercase; display: block; }

        .target-pill {
            background: rgba(46, 213, 115, 0.1);
            border: 1px solid var(--target-green);
            padding: 5px 20px;
            border-radius: 50px;
            font-weight: 900;
            color: var(--target-green);
            font-size: 0.9rem;
        }

        .fs-btn {
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.7rem;
        }

        /* GRID SYSTEM */
        main {
            flex: 1;
            display: grid;
            grid-template-rows: 25vh 30vh 1fr;
            gap: 1.5vh;
            min-height: 0;
        }

        .row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5vw; }
        .middle-row { display: grid; grid-template-columns: 1.5fr 1fr; gap: 1.5vw; }

        /* CARDS */
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5vh;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .label { font-size: 0.7rem; font-weight: 600; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .value { font-size: 2.8rem; font-weight: 900; font-family: 'Orbitron', sans-serif; }
        .sub-val { font-size: 0.8rem; color: var(--text-dim); }

        .chart-box { position: absolute; right: 10px; top: 10px; width: 100px; height: 100px; }
        .perc-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 900; font-size: 0.8rem; color: var(--text-main); }

        /* LISTS */
        .task-list { flex: 1; overflow-y: auto; margin-top: 10px; }
        .task-item {
            background: rgba(255,255,255,0.03);
            margin-bottom: 5px;
            padding: 10px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            border-left: 4px solid transparent;
        }
        .status { font-size: 0.65rem; font-weight: 800; text-transform: uppercase; padding: 2px 8px; border-radius: 4px; }
        .status.done { background: var(--target-green); color: black; }
        .status.wait { background: #333; color: var(--text-dim); }

    </style>
</head>
<body>

    <header>
        <div class="logo">
            <span>System Terminal</span>
            <h1>StockTeam VCB</h1>
        </div>
        <div class="target-pill">DAILY TARGET: 1,193 LOCATIONS</div>
        <button class="fs-btn" onclick="document.documentElement.requestFullscreen()">FULLSCREEN</button>
    </header>

    <main>
        <div class="row">
            <div class="card">
                <span class="label">Daily Locations Counted</span>
                <div class="value" id="count-val" style="color: var(--target-green);">0</div>
                <span class="sub-val" id="rem-val">Left to target: 1,193</span>
                <div class="chart-box">
                    <canvas id="gauge1"></canvas>
                    <div class="perc-overlay" id="p1">0%</div>
                </div>
            </div>

            <div class="card">
                <span class="label">Daily Task Completion</span>
                <div class="value" id="daily-task-val" style="color: var(--daily-red);">0/0</div>
                <span class="sub-val">Operational Performance</span>
                <div class="chart-box">
                    <canvas id="gauge2"></canvas>
                    <div class="perc-overlay" id="p2">0%</div>
                </div>
            </div>

            <div class="card">
                <span class="label">Weekly Task Completion</span>
                <div class="value" id="weekly-task-val" style="color: var(--weekly-blue);">0/0</div>
                <span class="sub-val">Strategic Targets</span>
                <div class="chart-box">
                    <canvas id="gauge3"></canvas>
                    <div class="perc-overlay" id="p3">0%</div>
                </div>
            </div>
        </div>

        <div class="middle-row">
            <div class="card">
                <span class="label" style="color: var(--target-green);">Daily Productivity by Area (Today Only)</span>
                <div style="flex:1;"><canvas id="dailyBar"></canvas></div>
            </div>
            <div class="card">
                <span class="label" style="color: var(--weekly-blue);">Weekly Volume History</span>
                <div style="flex:1;"><canvas id="weeklyLine"></canvas></div>
            </div>
        </div>

        <div class="row" style="grid-template-columns: 1.5fr 1fr; grid-column: span 3;">
            <div class="card">
                <span class="label">Daily Checklist</span>
                <div class="task-list" id="list-daily"></div>
            </div>
            <div class="card">
                <span class="label">Weekly Checklist</span>
                <div class="task-list" id="list-weekly"></div>
            </div>
        </div>
    </main>

    <script>
        const DAILY_TARGET = 1193;

        const db = {
            "piData": [
                {"Area": "MPR", "Daily Qty": 120}, {"Area": "PB1", "Daily Qty": 85}, {"Area": "PB2", "Daily Qty": 40},
                {"Area": "PB3", "Daily Qty": 0}, {"Area": "PB4", "Daily Qty": 0}, {"Area": "PBSRES", "Daily Qty": 110},
                {"Area": "MP", "Daily Qty": 250}, {"Area": "MIX", "Daily Qty": 136}, {"Area": "MS", "Daily Qty": 180},
                {"Area": "MSX", "Daily Qty": 200}, {"Area": "FM", "Daily Qty": 45}, {"Area": "HP", "Daily Qty": 20}
            ],
            "dailyTask": [
                {"Task": "Aged stock report 7AM", "Status": "Completed"},
                {"Task": "Aged stock report 3PM", "Status": "Not started"},
                {"Task": "ADJUSTMENTS (Returns)", "Status": "Not started"},
                {"Task": "PI 1st count", "Status": "Not started"},
                {"Task": "SLA update", "Status": "Not started"}
            ],
            "weeklyTask": [
                {"Task": "Period Shrinkage", "Status": "Completed"},
                {"Task": "SIS report", "Status": "Not started"},
                {"Task": "Weekly ORM", "Status": "Not started"}
            ],
            "weeklyPiData": [
                {"W": 30, "Q": 6901}, {"W": 31, "Q": 5447}, {"W": 32, "Q": 4524}, {"W": 33, "Q": 2068}, {"W": 34, "Q": 0}
            ]
        };

        window.onload = () => {
            // 1. CALCULATE REAL DAILY SUM
            const dailySum = db.piData.reduce((acc, curr) => acc + curr["Daily Qty"], 0);
            document.getElementById('count-val').innerText = dailySum;
            
            const remaining = DAILY_TARGET - dailySum;
            document.getElementById('rem-val').innerText = remaining > 0 ? `Left to target: ${remaining}` : `Target achieved!`;

            // 2. TASK RATIOS
            const dDone = db.dailyTask.filter(t => t.Status === "Completed").length;
            document.getElementById('daily-task-val').innerText = `${dDone}/${db.dailyTask.length}`;
            
            const wDone = db.weeklyTask.filter(t => t.Status === "Completed").length;
            document.getElementById('weekly-task-val').innerText = `${wDone}/${db.weeklyTask.length}`;

            // 3. DRAW GAUGES
            const drawGauge = (id, pId, val, target, color) => {
                const p = Math.min(Math.round((val / target) * 100), 100);
                document.getElementById(pId).innerText = p + "%";
                new Chart(document.getElementById(id), {
                    type: 'doughnut',
                    data: { datasets: [{ data: [val, Math.max(0, target - val)], backgroundColor: [color, '#1a1d23'], borderWidth: 0 }] },
                    options: { cutout: '80%', plugins: { tooltip: { enabled: false } }, maintainAspectRatio: false }
                });
            };

            drawGauge('gauge1', 'p1', dailySum, DAILY_TARGET, '#2ed573');
            drawGauge('gauge2', 'p2', dDone, db.dailyTask.length, '#ff4757');
            drawGauge('gauge3', 'p3', wDone, db.weeklyTask.length, '#54a0ff');

            // 4. DAILY BAR CHART
            new Chart(document.getElementById('dailyBar'), {
                type: 'bar',
                data: {
                    labels: db.piData.map(d => d.Area),
                    datasets: [{ label: 'Today', data: db.piData.map(d => d["Daily Qty"]), backgroundColor: '#2ed573', borderRadius: 4 }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: { y: { display: false }, x: { grid: { display: false }, ticks: { color: '#747d8c', font: { size: 10 } } } },
                    plugins: { legend: { display: false } }
                }
            });

            // 5. WEEKLY LINE CHART
            new Chart(document.getElementById('weeklyLine'), {
                type: 'line',
                data: {
                    labels: db.weeklyPiData.map(w => "W" + w.W),
                    datasets: [{ data: db.weeklyPiData.map(w => w.Q), borderColor: '#54a0ff', fill: true, backgroundColor: 'rgba(84, 160, 255, 0.1)', tension: 0.4 }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: { y: { display: false }, x: { grid: { display: false }, ticks: { color: '#747d8c' } } },
                    plugins: { legend: { display: false } }
                }
            });

            // 6. RENDER LISTS
            const listToDiv = (data, container, accent) => {
                const el = document.getElementById(container);
                data.forEach(t => {
                    const ok = t.Status === "Completed";
                    el.innerHTML += `
                        <div class="task-item" style="border-left-color: ${accent}">
                            <span>${t.Task}</span>
                            <span class="status ${ok ? 'done' : 'wait'}">${ok ? 'DONE' : 'WAIT'}</span>
                        </div>
                    `;
                });
            };
            listToDiv(db.dailyTask, 'list-daily', '#ff4757');
            listToDiv(db.weeklyTask, 'list-weekly', '#54a0ff');
        };
    </script>
</body>
</html>
