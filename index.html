<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PI Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;font-family:Inter,system-ui}
body{margin:0;background:radial-gradient(circle at top,#0b1025,#02030a);color:#fff;overflow:hidden}
.wrap{height:100vh;display:grid;grid-template-rows:auto 1fr;padding:16px;gap:12px}
header{display:flex;justify-content:space-between;align-items:center}
.title{font-weight:800;font-size:20px;letter-spacing:1px}
.clock{font-size:22px;font-weight:700}
main{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;height:100%}
.card{background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.02));border-radius:16px;padding:14px;display:flex;flex-direction:column;box-shadow:0 30px 60px rgba(0,0,0,.6)}
.label{text-align:center;font-weight:800;letter-spacing:2px;margin-bottom:8px}
canvas{flex:1}
.float{animation:float 6s ease-in-out infinite}
@keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}
</style>
</head>
<body>
<div class="wrap">
<header>
<div class="title">PI DASHBOARD</div>
<div class="clock" id="clock"></div>
</header>

<main>
<div class="card float">
<div class="label">DAILY</div>
<canvas id="dailyChart"></canvas>
</div>
<div class="card float">
<div class="label">WEEKLY</div>
<canvas id="weeklyChart"></canvas>
</div>
<div class="card float">
<div class="label">CYCLE</div>
<canvas id="cycleChart"></canvas>
</div>
</main>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>
const target=1193;
const colors=['#7c3aed','#06b6d4','#22c55e','#f97316','#ef4444','#6366f1','#ec4899'];

function clock(){setInterval(()=>{document.getElementById('clock').textContent=new Date().toLocaleTimeString();},1000)}clock();

fetch('data/dashboard.json').then(r=>r.json()).then(DATA=>{

// DAILY (true daily)
const dLabels=DATA.weeklyPiData.map(x=>x.Area);
const dValues=DATA.weeklyPiData.map(x=>Number(x['Daily Qty'])||0);
new Chart(dailyChart,{type:'bar',data:{labels:dLabels,datasets:[{data:dValues,backgroundColor:dValues.map(v=>v>=target?'#22c55e':'#ef4444'),borderRadius:8}]},options:{plugins:{legend:{display:false}},scales:{x:{ticks:{color:'#fff'}},y:{ticks:{color:'#fff'},beginAtZero:true}}}});

// WEEKLY
const wLabels=DATA.weeklyPiData.map(x=>x.Area);
const wValues=DATA.weeklyPiData.map(x=>Number(x['Weekly Qty'])||0);
new Chart(weeklyChart,{type:'bar',data:{labels:wLabels,datasets:[{data:wValues,backgroundColor:'#7c3aed',borderRadius:8}]},options:{plugins:{legend:{display:false}},scales:{x:{ticks:{color:'#fff'}},y:{ticks:{color:'#fff'},beginAtZero:true}}}});

// CYCLE
const cLabels=DATA.piData.map(x=>x.Area);
const cValues=DATA.piData.map(x=>Number(x.Counted)||0);
new Chart(cycleChart,{type:'doughnut',data:{labels:cLabels,datasets:[{data:cValues,backgroundColor:colors,hoverOffset:20}]},options:{plugins:{legend:{display:false}},cutout:'65%'}});
});
</script>
</body>
</html>
