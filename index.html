<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VCB | EXECUTIVE MISSION CONTROL</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js" } }
    </script>
    <style>
        :root {
            --bg: #050608; --panel: #0d1117;
            --mint: #00f2ff; --gold: #f6d365; --rose: #ff5f6d;
            --text: #ffffff; --border: rgba(255,255,255,0.08);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }

        /* GRID PRINCIPAL */
        .app-container {
            display: grid;
            grid-template-rows: 60px 180px 1fr 250px;
            gap: 15px; padding: 15px; height: 100vh;
        }

        /* HEADER */
        .top-nav {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--panel); border-radius: 12px; padding: 0 20px; border: 1px solid var(--border);
        }
        .target-pill { background: rgba(0, 242, 255, 0.1); color: var(--mint); padding: 5px 15px; border-radius: 20px; font-weight: 700; border: 1px solid var(--mint); }

        /* KPI 3D ROW */
        .kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .kpi-card { background: var(--panel); border-radius: 15px; border: 1px solid var(--border); display: flex; align-items: center; padding: 10px 25px; position: relative; }
        .kpi-data { flex: 1; }
        .kpi-val { font-size: 2.2rem; font-weight: 900; line-height: 1; }
        .kpi-label { font-size: 0.7rem; text-transform: uppercase; color: #666; letter-spacing: 1px; margin-top: 5px; }
        .canvas-3d { width: 120px; height: 120px; }

        /* MIDDLE SECTION (History & Areas) */
        .mid-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; min-height: 0; }
        .panel { background: var(--panel); border-radius: 15px; border: 1px solid var(--border); padding: 15px; display: flex; flex-direction: column; }
        .panel-title { font-size: 0.8rem; font-weight: 700; margin-bottom: 10px; color: var(--gold); text-transform: uppercase; }

        /* TASKS SECTION - BOTTOM */
        .bottom-tasks { display: grid; grid-template-columns: 1.5fr 1fr; gap: 15px; min-height: 0; }
        .task-list { overflow-y: auto; padding-right: 5px; }
        .task-list::-webkit-scrollbar { width: 4px; }
        .task-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }

        .task-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 15px; background: rgba(255,255,255,0.02); 
            border-radius: 8px; margin-bottom: 6px; border: 1px solid transparent;
        }
        .task-item.done { border-left: 4px solid var(--mint); background: rgba(0, 242, 255, 0.05); }
        .badge { font-size: 0.6rem; font-weight: 800; padding: 4px 10px; border-radius: 4px; }
        .b-done { background: var(--mint); color: #000; }
        .b-wait { background: #333; color: #888; }

        /* HOURGLASS REAL */
        #hourglass-box { width: 40px; height: 40px; }
    </style>
</head>
<body>

<div class="app-container">
    <header class="top-nav">
        <div style="display:flex; align-items:center; gap:15px;">
            <div id="hourglass-box"></div>
            <h2 style="font-weight:900; letter-spacing:-1px;">STOCKTEAM <span style="color:var(--gold)">VCB</span></h2>
        </div>
        <div class="target-pill">DAILY TARGET: 1,193 LOCATIONS</div>
        <div id="clock" style="font-weight:700; font-size:1.2rem;">00:00:00</div>
    </header>

    <section class="kpi-row">
        <div class="kpi-card">
            <div class="kpi-data">
                <div class="kpi-val" id="v-count">1186</div>
                <div class="kpi-label">Daily Locations / 99%</div>
            </div>
            <div id="c1" class="canvas-3d"></div>
        </div>
        <div class="kpi-card">
            <div class="kpi-data">
                <div class="kpi-val" id="v-daily">1/5</div>
                <div class="kpi-label">Daily Tasks / 20%</div>
            </div>
            <div id="c2" class="canvas-3d"></div>
        </div>
        <div class="kpi-card">
            <div class="kpi-data">
                <div class="kpi-val" id="v-weekly">1/3</div>
                <div class="kpi-label">Weekly Strategic / 33%</div>
            </div>
            <div id="c3" class="canvas-3d"></div>
        </div>
    </section>

    <section class="mid-grid">
        <div class="panel">
            <div class="panel-title">Productivity by Area (Locations)</div>
            <div id="area-bars" style="flex:1"></div>
        </div>
        <div class="panel">
            <div class="panel-title">Weekly Volume History</div>
            <div id="history-line" style="flex:1"></div>
        </div>
    </section>

    <section class="bottom-tasks">
        <div class="panel">
            <div class="panel-title">Daily Checklist</div>
            <div class="task-list" id="list-daily"></div>
        </div>
        <div class="panel">
            <div class="panel-title">Weekly Checklist</div>
            <div class="task-list" id="list-weekly"></div>
        </div>
    </section>
</div>

<script type="module">
    import * as THREE from 'three';

    // DATE REALE CONFORM IMAGINII TALE
    const data = {
        count: { current: 1186, target: 1193, perc: 99 },
        dailyTasks: [
            {n: "Aged stock report 7AM", s: "DONE"},
            {n: "Aged stock report 3PM", s: "WAIT"},
            {n: "ADJUSTMENTS (Returns)", s: "WAIT"},
            {n: "PI 1st count", s: "WAIT"},
            {n: "SLA update", s: "WAIT"}
        ],
        weeklyTasks: [
            {n: "Period Shrinkage", s: "DONE"},
            {n: "SIS report", s: "WAIT"},
            {n: "Weekly ORM", s: "WAIT"}
        ],
        areas: [
            {a: "MPR", v: 450}, {a: "PB1", v: 210}, {a: "PB2", v: 180},
            {a: "MP", v: 890}, {a: "MIX", v: 620}, {a: "MS", v: 710}
        ],
        history: [6901, 5447, 4524, 2068, 1100]
    };

    // MOTOR 3D PENTRU CHARTURI REALE (Donut Segmentat)
    function createRealChart3D(containerId, color, percent) {
        const container = document.getElementById(containerId);
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(120, 120);
        container.appendChild(renderer.domElement);

        // Partea Completată (Solidă)
        const arcLength = (percent / 100) * Math.PI * 2;
        const geometry = new THREE.TorusGeometry(10, 3, 16, 100, arcLength);
        const material = new THREE.MeshPhongMaterial({ color: color, shininess: 100 });
        const chart = new THREE.Mesh(geometry, material);
        chart.rotation.z = Math.PI / 2; // Începe de sus
        scene.add(chart);

        // Fundalul (Transparent/Wireframe)
        const bgGeo = new THREE.TorusGeometry(10, 3, 16, 100);
        const bgMat = new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true, transparent: true, opacity: 0.05 });
        scene.add(new THREE.Mesh(bgGeo, bgMat));

        const light = new THREE.PointLight(0xffffff, 100); light.position.set(10, 10, 10);
        scene.add(light, new THREE.AmbientLight(0xffffff, 0.5));
        camera.position.z = 30;

        function animate() {
            requestAnimationFrame(animate);
            chart.rotation.y += 0.005; // Rotație profesională lentă
            renderer.render(scene, camera);
        }
        animate();
    }

    // CEAS & RENDER DATE
    setInterval(() => {
        document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB');
    }, 1000);

    function renderLists() {
        const dBox = document.getElementById('list-daily');
        const wBox = document.getElementById('list-weekly');
        
        const html = (list) => list.map(t => `
            <div class="task-item ${t.s === 'DONE' ? 'done' : ''}">
                <span style="font-weight:600; font-size:0.85rem;">${t.n}</span>
                <span class="badge ${t.s === 'DONE' ? 'b-done' : 'b-wait'}">${t.s}</span>
            </div>
        `).join('');

        dBox.innerHTML = html(data.dailyTasks);
        wBox.innerHTML = html(data.weeklyTasks);
    }

    // CLEPSIDRA MINIMALISTĂ
    function initHourglass() {
        const hBox = document.getElementById('hourglass-box');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(40, 40); hBox.appendChild(renderer.domElement);
        const mesh = new THREE.Mesh(new THREE.OctahedronGeometry(2), new THREE.MeshBasicMaterial({ color: 0xf6d365, wireframe: true }));
        scene.add(mesh); camera.position.z = 10;
        function anim() { requestAnimationFrame(anim); mesh.rotation.y += 0.02; renderer.render(scene, camera); }
        anim();
    }

    window.onload = () => {
        initHourglass();
        renderLists();
        createRealChart3D('c1', 0x00f2ff, 99);
        createRealChart3D('c2', 0xff5f6d, 20);
        createRealChart3D('c3', 0xf6d365, 33);
    };
</script>
</body>
</html>
