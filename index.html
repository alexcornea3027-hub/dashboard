<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>STOCK TEAM | VCB ABSOLUTE CONTROL</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js" } }
    </script>
    <style>
        :root {
            --bg: #050608; --card: #0d1117;
            --cyan: #00f2ff; --gold: #f6d365; --red: #ff4d4d;
            --text: #ffffff; --border: rgba(255,255,255,0.08);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }

        .app { display: grid; grid-template-rows: 70px 160px 1fr 280px; gap: 12px; padding: 12px; height: 100vh; }

        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; background: var(--card); border-radius: 8px; padding: 0 20px; border: 1px solid var(--border); }
        .target-box { background: rgba(0,242,255,0.1); border: 1px solid var(--cyan); color: var(--cyan); padding: 6px 15px; border-radius: 4px; font-weight: 900; font-size: 0.9rem; }

        /* KPI ROW */
        .kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .kpi-card { background: var(--card); border-radius: 8px; border: 1px solid var(--border); padding: 15px; display: flex; align-items: center; justify-content: space-between; }
        .kpi-val { font-size: 2.5rem; font-weight: 900; line-height: 1; }
        .kpi-label { font-size: 0.7rem; color: #666; text-transform: uppercase; margin-top: 5px; font-weight: 700; }
        .canvas-3d { width: 110px; height: 110px; }

        /* MID SECTION - GRAPHS */
        .mid-grid { display: grid; grid-template-columns: 1.2fr 1fr; gap: 12px; min-height: 0; }
        .panel { background: var(--card); border-radius: 8px; border: 1px solid var(--border); padding: 15px; display: flex; flex-direction: column; }
        .panel-title { font-size: 0.75rem; color: var(--gold); font-weight: 700; text-transform: uppercase; margin-bottom: 15px; }

        /* BOTTOM - TASKS */
        .task-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 12px; min-height: 0; }
        .task-scroll { overflow-y: auto; padding-right: 8px; }
        .task-scroll::-webkit-scrollbar { width: 4px; }
        .task-scroll::-webkit-scrollbar-thumb { background: var(--border); }

        .task-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(255,255,255,0.02); border-radius: 4px; margin-bottom: 5px; border-left: 3px solid transparent; }
        .task-item.done { border-left-color: var(--cyan); background: rgba(0,242,255,0.05); }
        .status { font-size: 0.6rem; font-weight: 900; padding: 4px 8px; border-radius: 2px; }
        .s-done { background: var(--cyan); color: #000; }
        .s-wait { background: #333; color: #888; }
    </style>
</head>
<body>

<div class="app">
    <header class="header">
        <div style="display:flex; align-items:center; gap:20px;">
            <div id="hg-3d" style="width:50px; height:50px;"></div>
            <h1 style="font-weight:900; letter-spacing:-1px; font-size:1.4rem;">STOCKTEAM <span style="color:var(--gold)">VCB</span></h1>
        </div>
        <div class="target-box">DAILY TARGET: 1,193 LOCATIONS</div>
        <div id="clock" style="font-weight:700; font-size:1.3rem; letter-spacing:2px;">00:00:00</div>
    </header>

    <div class="kpi-row">
        <div class="kpi-card">
            <div><div class="kpi-val">1186</div><div class="kpi-label">Daily Locations / 99%</div></div>
            <div id="chart-1" class="canvas-3d"></div>
        </div>
        <div class="kpi-card">
            <div><div class="kpi-val">1/5</div><div class="kpi-label">Daily Tasks / 20%</div></div>
            <div id="chart-2" class="canvas-3d"></div>
        </div>
        <div class="kpi-card">
            <div><div class="kpi-val">1/3</div><div class="kpi-label">Weekly Strategic / 33%</div></div>
            <div id="chart-3" class="canvas-3d"></div>
        </div>
    </div>

    <div class="mid-grid">
        <div class="panel">
            <div class="panel-title">Productivity by Area (Today)</div>
            <div id="bar-canvas" style="flex:1"></div>
        </div>
        <div class="panel">
            <div class="panel-title">Weekly Volume Trend (W30-W34)</div>
            <div id="trend-canvas" style="flex:1"></div>
        </div>
    </div>

    <div class="task-grid">
        <div class="panel">
            <div class="panel-title">Daily Checklist</div>
            <div class="task-scroll" id="daily-list"></div>
        </div>
        <div class="panel">
            <div class="panel-title">Weekly Checklist</div>
            <div class="task-scroll" id="weekly-list"></div>
        </div>
    </div>
</div>

<script type="module">
    import * as THREE from 'three';

    // DATE DIN SCREENSHOT
    const db = {
        daily: [
            {n:"Aged stock report 7AM", s:"DONE"}, {n:"Aged stock report 3PM", s:"WAIT"},
            {n:"ADJUSTMENTS (Returns)", s:"WAIT"}, {n:"PI 1st count", s:"WAIT"}, {n:"SLA update", s:"WAIT"}
        ],
        weekly: [{n:"Period Shrinkage", s:"DONE"}, {n:"SIS report", s:"WAIT"}, {n:"Weekly ORM", s:"WAIT"}],
        areas: [
            {a:"MPR", v:40}, {a:"PB1", v:30}, {a:"PB2", v:20}, {a:"MP", v:90}, {a:"MIX", v:60}, {a:"MS", v:70}, {a:"FM", v:20}
        ],
        trend: [80, 70, 60, 40, 10] // W30 -> W34
    };

    // 3D DONUT (FUNCTIONAL, NU BALON)
    function makeChart(id, color, pct) {
        const el = document.getElementById(id);
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
        renderer.setSize(110, 110); el.appendChild(renderer.domElement);

        const group = new THREE.Group();
        // Progress Segment
        const progGeo = new THREE.TorusGeometry(10, 3, 16, 100, (pct/100) * Math.PI * 2);
        const progMat = new THREE.MeshPhongMaterial({ color: color, shininess: 100 });
        const prog = new THREE.Mesh(progGeo, progMat);
        prog.rotation.z = Math.PI / 2;
        group.add(prog);

        // Ghost Ring (Total)
        const ghost = new THREE.Mesh(new THREE.TorusGeometry(10, 3, 16, 100), new THREE.MeshBasicMaterial({ color: 0x333333, wireframe: true, transparent:true, opacity:0.1 }));
        group.add(ghost);

        scene.add(group, new THREE.AmbientLight(0xffffff, 0.8));
        const l = new THREE.PointLight(0xffffff, 100); l.position.set(10,10,10); scene.add(l);
        camera.position.z = 30;

        function anim() { requestAnimationFrame(anim); group.rotation.y += 0.01; renderer.render(scene, camera); }
        anim();
    }

    // PRODUCTIVITY BARS (SOLID DATA)
    function makeBars() {
        const el = document.getElementById('bar-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, el.clientWidth/el.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
        renderer.setSize(el.clientWidth, el.clientHeight); el.appendChild(renderer.domElement);

        db.areas.forEach((d, i) => {
            const h = d.v / 5;
            const geo = new THREE.BoxGeometry(2, h, 2);
            const mat = new THREE.MeshPhongMaterial({ color: 0x00f2ff });
            const mesh = new THREE.Mesh(geo, mat);
            mesh.position.set((i - 3) * 4, h/2 - 10, 0);
            scene.add(mesh);
        });

        scene.add(new THREE.AmbientLight(0xffffff, 1));
        camera.position.set(0, 0, 40);
        function anim() { requestAnimationFrame(anim); renderer.render(scene, camera); }
        anim();
    }

    // CLEAN UI RENDER
    function renderLists() {
        const dL = document.getElementById('daily-list');
        const wL = document.getElementById('weekly-list');
        const draw = (list) => list.map(t => `<div class="task-item ${t.s==='DONE'?'done':''}"><span>${t.n}</span><span class="status ${t.s==='DONE'?'s-done':'s-wait'}">${t.s}</span></div>`).join('');
        dL.innerHTML = draw(db.daily);
        wL.innerHTML = draw(db.weekly);
    }

    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB'); }, 1000);

    window.onload = () => {
        makeChart('chart-1', 0x00f2ff, 99);
        makeChart('chart-2', 0xff4d4d, 20);
        makeChart('chart-3', 0xf6d365, 33);
        makeBars();
        renderLists();
    };
</script>
</body>
</html>
