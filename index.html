<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>STOCK TEAM | VCB PRECISION</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js" } }
    </script>
    <style>
        :root {
            --bg: #080a0f; --panel: rgba(13, 17, 23, 0.9);
            --accent: #00f2ff; --gold: #f6d365; --crimson: #ff4d4d;
            --text: #e6eef8; --border: rgba(255,255,255,0.05);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }

        .dashboard { display: grid; grid-template-rows: 80px 1fr; gap: 15px; padding: 15px; height: 100vh; }

        /* TOP BAR */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--panel); border-radius: 20px; border: 1px solid var(--border); padding: 0 30px;
        }
        .brand { font-weight: 800; font-size: 1.4rem; }
        .clock-section { display: flex; align-items: center; gap: 20px; }
        #time { font-size: 2rem; font-weight: 800; color: #fff; letter-spacing: 2px; }

        /* MAIN GRID */
        .main-grid { display: grid; grid-template-columns: 1fr 400px; gap: 15px; min-height: 0; }
        .stats-area { display: grid; grid-template-rows: 1fr 1fr; gap: 15px; }

        .panel { 
            background: var(--panel); border-radius: 25px; border: 1px solid var(--border);
            padding: 20px; display: flex; flex-direction: column; position: relative;
        }
        .panel-header { margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .panel-title { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; color: #6b7280; letter-spacing: 2px; }

        /* 3D DATA VISUALS */
        .chart-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; flex: 1; }
        .canvas-container { position: relative; width: 100%; height: 100%; }
        .data-label { position: absolute; bottom: 10px; width: 100%; text-align: center; font-size: 0.8rem; font-weight: 600; }
        .big-val { font-size: 1.8rem; font-weight: 800; display: block; }

        /* TASKS - SCROLLABLE & PERFECT */
        .task-column { flex: 1; overflow-y: auto; padding-right: 10px; }
        .task-column::-webkit-scrollbar { width: 4px; }
        .task-column::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }

        .task-item {
            background: rgba(255,255,255,0.02); padding: 15px; border-radius: 15px;
            margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid transparent; transition: 0.2s;
        }
        .task-item.complete { border-left: 4px solid var(--accent); background: rgba(0, 242, 255, 0.03); }
        .status-pill { font-size: 0.6rem; font-weight: 800; padding: 5px 12px; border-radius: 50px; text-transform: uppercase; }
        .ready { background: var(--accent); color: #000; }
        .pending { background: rgba(255,255,255,0.1); color: #666; }

        /* HOURGLASS PARTICLES */
        #hg-wrap { width: 60px; height: 60px; }
    </style>
</head>
<body>

<div class="dashboard">
    <header class="header">
        <div class="brand">STOCK TEAM <span style="color:var(--gold)">| VCB</span></div>
        <div class="clock-section">
            <div id="hg-wrap"></div>
            <div id="time">00:00:00</div>
        </div>
        <button onclick="document.documentElement.requestFullscreen()" class="status-pill pending" style="cursor:pointer; border:none;">Fullscreen</button>
    </header>

    <div class="main-grid">
        <div class="stats-area">
            <div class="panel">
                <div class="panel-header"><div class="panel-title">Operational Efficiency · 3D Crystals</div></div>
                <div class="chart-row">
                    <div class="canvas-container" id="c-daily">
                        <div class="data-label"><span class="big-val" id="v-daily">99%</span>Count Accuracy</div>
                    </div>
                    <div class="canvas-container" id="c-tasks">
                        <div class="data-label"><span class="big-val" id="v-tasks">2/15</span>Task Completion</div>
                    </div>
                    <div class="canvas-container" id="c-weekly">
                        <div class="data-label"><span class="big-val" id="v-weekly">33%</span>Strategic Goal</div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header"><div class="panel-title">Area Productivity Spectrum</div></div>
                <div id="area-canvas" style="flex:1"></div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-header"><div class="panel-title">Mission Control · Task Feed</div></div>
            <div class="task-column" id="taskFeed">
                </div>
        </div>
    </div>
</div>

<script type="module">
    import * as THREE from 'three';

    // -- DATE REALE (Mapate conform imaginii tale) --
    const appData = {
        stats: { dailyPerc: 99, tasksDone: 2, tasksTotal: 15, weeklyPerc: 33 },
        tasks: [
            {n: "Aged stock report 7AM", s: "Completed", type: "Daily"},
            {n: "Aged stock report 3PM", s: "Pending", type: "Daily"},
            {n: "ADJUSTMENTS (Returns)", s: "Pending", type: "Daily"},
            {n: "PI 1st count", s: "Pending", type: "Daily"},
            {n: "SLA update", s: "Pending", type: "Daily"},
            {n: "Period Shrinkage", s: "Completed", type: "Weekly"},
            {n: "SIS report", s: "Pending", type: "Weekly"},
            {n: "Weekly ORM", s: "Pending", type: "Weekly"},
            {n: "Internet Returns", s: "Pending", type: "Daily"},
            {n: "Gap Check Area A", s: "Pending", type: "Daily"}
        ]
    };

    // -- CLOCK --
    setInterval(() => {
        document.getElementById('time').innerText = new Date().toLocaleTimeString('en-GB', {hour12:false});
    }, 1000);

    // -- TASK RENDERER (Cu Scroll) --
    function renderTasks() {
        const feed = document.getElementById('taskFeed');
        feed.innerHTML = appData.tasks.map(t => `
            <div class="task-item ${t.s === 'Completed' ? 'complete' : ''}">
                <div>
                    <div style="font-size: 0.85rem; font-weight: 600;">${t.n}</div>
                    <div style="font-size: 0.65rem; color: #555;">${t.type} Routine</div>
                </div>
                <span class="status-pill ${t.s === 'Completed' ? 'ready' : 'pending'}">${t.s === 'Completed' ? 'Done' : 'Wait'}</span>
            </div>
        `).join('');
    }

    // -- ENGINE 3D PRECIS (Viteză mică, rotație fină) --
    function createSmartChart(id, color, percentage) {
        const container = document.getElementById(id);
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        // Obiectul 3D: Un Torus care pulsează conform procentajului
        const geo = new THREE.TorusGeometry(5, 1.2, 16, 100);
        const mat = new THREE.MeshStandardMaterial({ 
            color: color, 
            emissive: color, 
            emissiveIntensity: percentage / 100, // Strălucește mai tare dacă progresul e mare
            metalness: 0.8, 
            roughness: 0.2 
        });
        const torus = new THREE.Mesh(geo, mat);
        scene.add(torus);

        scene.add(new THREE.AmbientLight(0xffffff, 0.5));
        const light = new THREE.PointLight(0xffffff, 10); light.position.set(5,5,5); scene.add(light);
        camera.position.z = 15;

        function animate() {
            requestAnimationFrame(animate);
            // Viteza redusă pentru profesionalism
            torus.rotation.y += 0.005; 
            torus.rotation.x += 0.002;
            renderer.render(scene, camera);
        }
        animate();
    }

    // -- CLEPSIDRA 3D --
    function initHourglass() {
        const hCont = document.getElementById('hg-wrap');
        const hScene = new THREE.Scene();
        const hCam = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const hRen = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        hRen.setSize(60, 60);
        hCont.appendChild(hRen.domElement);

        const hGeo = new THREE.OctahedronGeometry(2);
        const hMat = new THREE.MeshPhongMaterial({ color: 0xf6d365, wireframe: true });
        const hMesh = new THREE.Mesh(hGeo, hMat);
        hScene.add(hMesh);
        hScene.add(new THREE.AmbientLight(0xffffff, 1));
        hCam.position.z = 8;

        function hAnim() {
            requestAnimationFrame(hAnim);
            hMesh.rotation.y += 0.01;
            hRen.render(hScene, hCam);
        }
        hAnim();
    }

    window.onload = () => {
        renderTasks();
        initHourglass();
        // Culori mapate la status (Mint pt succes, Rose pt lucru în curs)
        createSmartChart('c-daily', 0x00f2ff, appData.stats.dailyPerc);
        createSmartChart('c-tasks', 0xff4d4d, (appData.stats.tasksDone / appData.stats.tasksTotal) * 100);
        createSmartChart('c-weekly', 0xf6d365, appData.stats.weeklyPerc);
    };
</script>
</body>
</html>
