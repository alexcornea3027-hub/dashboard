<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>STOCK TEAM VCB | 3D COMMAND</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root{
 --bg:#05070d;
 --panel:rgba(255,255,255,.07);
 --border:rgba(255,255,255,.15);
 --text:#fff;

 --cyan:#4fd1c5;
 --amber:#ffb703;
 --rose:#ff6b6b;
}

[data-theme="light"]{
 --bg:#f2f4f9;
 --panel:#ffffff;
 --border:#d0d6e0;
 --text:#111;
}

*{margin:0;padding:0;box-sizing:border-box}
body{
 font-family:'Outfit',sans-serif;
 background:var(--bg);
 color:var(--text);
 height:100vh;
 overflow:hidden;
}

.app{
 height:100vh;
 display:grid;
 grid-template-rows:70px 90px 1fr;
}

/* TOP BAR */
.top{
 display:flex;
 justify-content:space-between;
 align-items:center;
 padding:0 30px;
}
.logo{font-size:1.4rem;font-weight:800}
.logo span{color:var(--amber)}

.btn{
 padding:10px 22px;
 border-radius:50px;
 border:none;
 cursor:pointer;
 font-weight:700;
 background:linear-gradient(135deg,var(--amber),#ff8c42);
}

/* CLOCK */
.clock{
 display:flex;
 justify-content:center;
 align-items:center;
}
.clock-card{
 padding:14px 50px;
 border-radius:60px;
 background:var(--panel);
 border:1px solid var(--border);
 box-shadow:0 20px 40px rgba(0,0,0,.5);
 animation:float 6s ease-in-out infinite;
}
#time{font-size:2.8rem;font-weight:800;letter-spacing:3px}
#date{font-size:.8rem;color:var(--amber);text-align:center}

@keyframes float{
 0%,100%{transform:translateY(0)}
 50%{transform:translateY(-12px)}
}

/* MAIN */
.main{
 padding:20px;
 display:grid;
 grid-template-columns:1.3fr 1fr;
 grid-template-rows:1fr 1fr;
 gap:20px;
}

/* CARDS */
.card{
 background:var(--panel);
 border:1px solid var(--border);
 border-radius:36px;
 padding:20px;
 position:relative;
 overflow:hidden;
}

.card h3{
 font-size:.75rem;
 letter-spacing:2px;
 color:#888;
 margin-bottom:10px;
}

/* 3D */
.canvas3d{width:100%;height:100%}

/* TASKS */
.tasks{
 height:100%;
 overflow-y:auto;
 padding-right:8px;
}
.tasks::-webkit-scrollbar{width:4px}
.tasks::-webkit-scrollbar-thumb{
 background:var(--border);
 border-radius:10px;
}

.task{
 padding:14px 18px;
 margin-bottom:10px;
 border-radius:18px;
 background:rgba(255,255,255,.05);
 display:flex;
 justify-content:space-between;
 align-items:center;
}
.task.done{border-left:4px solid var(--cyan)}
.badge{
 font-size:.65rem;
 font-weight:800;
 padding:6px 14px;
 border-radius:50px;
}
.ok{background:var(--cyan);color:#000}
.wait{background:#aaa;color:#000}
</style>
</head>

<body data-theme="dark">

<div class="app">

<!-- TOP -->
<div class="top">
 <div class="logo">STOCK TEAM <span>| VCB</span></div>
 <div>
  <button class="btn" onclick="toggleTheme()">DARK / LIGHT</button>
  <button class="btn" onclick="toggleFS()">FULLSCREEN</button>
 </div>
</div>

<!-- CLOCK -->
<div class="clock">
 <div class="clock-card">
  <div id="time">00:00:00</div>
  <div id="date">LOADING…</div>
 </div>
</div>

<!-- MAIN -->
<div class="main">

<!-- 3D BARS -->
<div class="card" style="grid-row:span 2">
 <h3>PRODUCTIVITY MAP · 3D</h3>
 <div id="bars3d" class="canvas3d"></div>
</div>

<!-- DONUT -->
<div class="card">
 <h3>COUNTING PROGRESS</h3>
 <div id="donut3d" class="canvas3d"></div>
</div>

<!-- TASKS -->
<div class="card">
 <h3>DAILY OPERATIONS</h3>
 <div class="tasks" id="tasks"></div>
</div>

</div>
</div>

<!-- ================= THREE.JS ES MODULE ================= -->
<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js';
import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/controls/OrbitControls.js';

/* DATA */
const store={
 counting:[
 {area:"MPR",qty:146},{area:"PB1",qty:43},{area:"PB2",qty:79},
 {area:"PB3",qty:77},{area:"PB4",qty:16},{area:"PBSRES",qty:51},
 {area:"MP",qty:256},{area:"MIX",qty:330},{area:"MS",qty:215},
 {area:"MSX",qty:287},{area:"FM",qty:23},{area:"HP",qty:5}
 ],
 daily:[
 {t:"Aged stock report 7AM",s:"Completed"},
 {t:"Aged stock report 3PM",s:"Not started"},
 {t:"Returns Adjustments",s:"Not started"},
 {t:"PI First Count",s:"Not started"},
 {t:"SLA Master Sync",s:"Not started"},
 {t:"High Value Audit",s:"Not started"}
 ]
};

/* CLOCK */
setInterval(()=>{
 const d=new Date();
 time.innerText=d.toLocaleTimeString('en-GB',{hour12:false});
 date.innerText=d.toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long'});
},1000);

/* TASKS */
const box=document.getElementById("tasks");
store.daily.forEach(t=>{
 const d=t.s==="Completed";
 box.innerHTML+=`
 <div class="task ${d?"done":""}">
  <span>${t.t}</span>
  <span class="badge ${d?"ok":"wait"}">${d?"READY":"PENDING"}</span>
 </div>`;
});

/* FULLSCREEN */
window.toggleFS=()=>{
 if(!document.fullscreenElement)document.documentElement.requestFullscreen();
 else document.exitFullscreen();
}

/* THEME */
window.toggleTheme=()=>{
 document.body.dataset.theme=
 document.body.dataset.theme==="dark"?"light":"dark";
}

/* 3D BARS */
function bars3D(){
 const el=document.getElementById("bars3d");
 const scene=new THREE.Scene();
 const cam=new THREE.PerspectiveCamera(50,el.clientWidth/el.clientHeight,.1,100);
 cam.position.set(0,8,18);

 const r=new THREE.WebGLRenderer({antialias:true,alpha:true});
 r.setSize(el.clientWidth,el.clientHeight);
 el.appendChild(r.domElement);

 scene.add(new THREE.AmbientLight(0xffffff,.4));
 const l=new THREE.DirectionalLight(0x4fd1c5,1.2);
 l.position.set(5,10,5);
 scene.add(l);

 const max=Math.max(...store.counting.map(x=>x.qty));
 store.counting.forEach((d,i)=>{
  const h=(d.qty/max)*8+.3;
  const bar=new THREE.Mesh(
   new THREE.BoxGeometry(.9,h,.9),
   new THREE.MeshStandardMaterial({color:0x4fd1c5,metalness:.5,roughness:.25})
  );
  bar.position.set((i-6)*1.3,h/2,0);
  scene.add(bar);
 });

 const c=new OrbitControls(cam,r.domElement);
 c.enableDamping=true;
 c.enableZoom=false;

 (function anim(){
  requestAnimationFrame(anim);
  c.update();
  r.render(scene,cam);
 })();
}

/* 3D DONUT */
function donut3D(){
 const el=document.getElementById("donut3d");
 const scene=new THREE.Scene();
 const cam=new THREE.PerspectiveCamera(50,el.clientWidth/el.clientHeight,.1,100);
 cam.position.z=8;

 const r=new THREE.WebGLRenderer({antialias:true,alpha:true});
 r.setSize(el.clientWidth,el.clientHeight);
 el.appendChild(r.domElement);

 scene.add(new THREE.AmbientLight(0xffffff,.5));
 const l=new THREE.PointLight(0xffb703,1.5);
 l.position.set(5,5,5);
 scene.add(l);

 const total=store.counting.reduce((a,b)=>a+b.qty,0);
 const geo=new THREE.TorusGeometry(2.8,.6,32,160,(total/1193)*Math.PI*2);
 const mat=new THREE.MeshStandardMaterial({color:0xffb703,metalness:.6,roughness:.25});
 const tor=new THREE.Mesh(geo,mat);
 scene.add(tor);

 (function a(){
  requestAnimationFrame(a);
  tor.rotation.y+=.01;
  r.render(scene,cam);
 })();
}

bars3D();
donut3D();
</script>

</body>
</html>
