<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>STOCK TEAM VCB | IMMERSIVE 3D</title>

<!-- THREE.JS -->
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root{
 --bg:#05060a;
 --panel:rgba(255,255,255,.06);
 --border:rgba(255,255,255,.15);
 --text:#fff;

 --cyan:#4fd1c5;
 --amber:#ffb703;
 --red:#ff5d5d;
}

[data-theme="light"]{
 --bg:#f4f6fb;
 --panel:#ffffff;
 --border:#d0d6e0;
 --text:#111;
}

*{margin:0;padding:0;box-sizing:border-box}
body{
 font-family:'Outfit',sans-serif;
 background:var(--bg);
 color:var(--text);
 height:100vh;
 overflow:hidden;
}

.app{
 height:100vh;
 display:grid;
 grid-template-rows:70px 1fr;
}

/* TOP BAR */
.top{
 display:flex;
 align-items:center;
 justify-content:space-between;
 padding:0 30px;
 background:linear-gradient(180deg,rgba(0,0,0,.3),transparent);
}
.logo{font-weight:800;font-size:1.4rem}
.logo span{color:var(--amber)}
.controls button{
 padding:10px 22px;
 border:none;
 border-radius:50px;
 cursor:pointer;
 font-weight:700;
 background:linear-gradient(135deg,var(--amber),#ff8c42);
}

/* MAIN */
.main{
 padding:20px;
 display:grid;
 grid-template-columns:1.3fr 1fr;
 grid-template-rows:1fr 1fr;
 gap:20px;
}

/* CARDS */
.card{
 background:var(--panel);
 border:1px solid var(--border);
 border-radius:40px;
 padding:20px;
 position:relative;
 overflow:hidden;
}

/* CURVED SECTIONS */
.card.curve::before{
 content:'';
 position:absolute;
 inset:-30%;
 background:radial-gradient(circle at 30% 30%,rgba(79,209,197,.25),transparent 55%);
}

/* 3D CANVAS */
.canvas3d{width:100%;height:100%}

/* TASKS */
.tasks{
 height:100%;
 overflow-y:auto;
 padding-right:10px;
}
.task{
 padding:14px 18px;
 margin-bottom:10px;
 border-radius:18px;
 background:rgba(255,255,255,.05);
 display:flex;
 justify-content:space-between;
}
.task.done{border-left:4px solid var(--cyan)}
.badge{
 font-size:.65rem;
 padding:6px 14px;
 border-radius:50px;
 font-weight:800;
}
.ok{background:var(--cyan);color:#000}
.wait{background:#999;color:#000}
</style>
</head>

<body data-theme="dark">

<div class="app">

<!-- TOP -->
<div class="top">
 <div class="logo">STOCK TEAM <span>| VCB</span></div>
 <div class="controls">
  <button onclick="toggleTheme()">DARK / LIGHT</button>
 </div>
</div>

<!-- MAIN -->
<div class="main">

<!-- LEFT BIG 3D -->
<div class="card curve" style="grid-row:span 2">
 <div id="bars3d" class="canvas3d"></div>
</div>

<!-- TOP RIGHT -->
<div class="card curve">
 <div id="donut3d" class="canvas3d"></div>
</div>

<!-- BOTTOM RIGHT -->
<div class="card">
 <div class="tasks" id="tasks"></div>
</div>

</div>
</div>

<script>
/* ================= DATA ================= */
const store={
 counting:[
 {area:"MPR",qty:146},{area:"PB1",qty:43},{area:"PB2",qty:79},
 {area:"PB3",qty:77},{area:"PB4",qty:16},{area:"PBSRES",qty:51},
 {area:"MP",qty:256},{area:"MIX",qty:330},{area:"MS",qty:215},
 {area:"MSX",qty:287},{area:"FM",qty:23},{area:"HP",qty:5}
 ],
 daily:[
 {t:"Aged stock report 7AM",s:"Completed"},
 {t:"Aged stock report 3PM",s:"Not started"},
 {t:"Returns Adjustments",s:"Not started"},
 {t:"PI First Count",s:"Not started"},
 {t:"SLA Master Sync",s:"Not started"},
 {t:"High Value Audit",s:"Not started"}
 ]
};

/* ================= THEME ================= */
function toggleTheme(){
 document.body.dataset.theme =
 document.body.dataset.theme==="dark"?"light":"dark";
}

/* ================= TASKS ================= */
const taskBox=document.getElementById("tasks");
store.daily.forEach(t=>{
 const d=t.s==="Completed";
 taskBox.innerHTML+=`
 <div class="task ${d?"done":""}">
  <span>${t.t}</span>
  <span class="badge ${d?"ok":"wait"}">${d?"READY":"PENDING"}</span>
 </div>`;
});

/* ================= 3D BAR CHART ================= */
function bars3D(){
 const el=document.getElementById("bars3d");
 const scene=new THREE.Scene();
 const cam=new THREE.PerspectiveCamera(50,el.clientWidth/el.clientHeight,.1,100);
 cam.position.set(0,8,16);

 const renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});
 renderer.setSize(el.clientWidth,el.clientHeight);
 el.appendChild(renderer.domElement);

 scene.add(new THREE.AmbientLight(0xffffff,.4));
 const light=new THREE.DirectionalLight(0x4fd1c5,1.2);
 light.position.set(5,10,5);
 scene.add(light);

 const max=Math.max(...store.counting.map(x=>x.qty));
 store.counting.forEach((d,i)=>{
  const h=(d.qty/max)*8+.2;
  const bar=new THREE.Mesh(
   new THREE.BoxGeometry(.8,h,.8),
   new THREE.MeshStandardMaterial({color:0x4fd1c5,metalness:.4,roughness:.3})
  );
  bar.position.set((i-6)*1.2,h/2,0);
  scene.add(bar);
 });

 const controls=new THREE.OrbitControls(cam,renderer.domElement);
 controls.enableZoom=false;
 controls.enableDamping=true;

 (function animate(){
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene,cam);
 })();
}

/* ================= 3D DONUT ================= */
function donut3D(){
 const el=document.getElementById("donut3d");
 const scene=new THREE.Scene();
 const cam=new THREE.PerspectiveCamera(50,el.clientWidth/el.clientHeight,.1,100);
 cam.position.z=8;

 const renderer=new THREE.WebGLRenderer({alpha:true,antialias:true});
 renderer.setSize(el.clientWidth,el.clientHeight);
 el.appendChild(renderer.domElement);

 scene.add(new THREE.AmbientLight(0xffffff,.5));
 const l=new THREE.PointLight(0xffb703,1.5);
 l.position.set(5,5,5);
 scene.add(l);

 const total=store.counting.reduce((a,b)=>a+b.qty,0);
 const geo=new THREE.TorusGeometry(2.6,.6,32,120,(total/1193)*Math.PI*2);
 const mat=new THREE.MeshStandardMaterial({color:0xffb703,metalness:.6,roughness:.25});
 const tor=new THREE.Mesh(geo,mat);
 scene.add(tor);

 (function anim(){
  requestAnimationFrame(anim);
  tor.rotation.y+=.01;
  renderer.render(scene,cam);
 })();
}

bars3D();
donut3D();
</script>

</body>
</html>
