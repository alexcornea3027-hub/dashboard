<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>STOCK TEAM VCB | 3D WOW</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root{
 --bg:#05070d;
 --panel:rgba(255,255,255,.07);
 --border:rgba(255,255,255,.15);
 --text:#fff;
 --cyan:#4fd1c5;
 --amber:#ffb703;
}

[data-theme="light"]{
 --bg:#f3f5fa;
 --panel:#ffffff;
 --border:#d0d6e0;
 --text:#111;
}

*{margin:0;padding:0;box-sizing:border-box}
body{
 font-family:'Outfit',sans-serif;
 background:var(--bg);
 color:var(--text);
 height:100vh;
 overflow:hidden;
}

.app{
 height:100vh;
 display:grid;
 grid-template-rows:70px 110px 1fr;
}

/* TOP */
.top{
 display:flex;
 justify-content:space-between;
 align-items:center;
 padding:0 30px;
}
.logo{font-size:1.4rem;font-weight:800}
.logo span{color:var(--amber)}
button{
 padding:10px 22px;
 border:none;
 border-radius:50px;
 font-weight:700;
 cursor:pointer;
 background:linear-gradient(135deg,var(--amber),#ff8c42);
}

/* CLOCK */
.clock{
 display:flex;
 justify-content:center;
 align-items:center;
}
.clock-card{
 display:flex;
 align-items:center;
 gap:25px;
 padding:20px 50px;
 border-radius:70px;
 background:var(--panel);
 border:1px solid var(--border);
 box-shadow:0 20px 40px rgba(0,0,0,.5);
}
#time{font-size:2.6rem;font-weight:800;letter-spacing:3px}
#date{font-size:.8rem;color:var(--amber)}
.hourglass{
 width:40px;
 height:60px;
 position:relative;
 animation:idle 4s infinite ease-in-out;
}
.hourglass::before,
.hourglass::after{
 content:'';
 position:absolute;
 left:0;right:0;
 margin:auto;
 width:40px;height:30px;
 border:3px solid var(--amber);
 border-radius:20px 20px 5px 5px;
}
.hourglass::after{
 top:30px;
 transform:rotate(180deg);
}
.sand{
 position:absolute;
 width:8px;height:8px;
 background:var(--amber);
 border-radius:50%;
 left:16px;top:26px;
}
@keyframes flip{
 0%{transform:rotate(0)}
 100%{transform:rotate(180deg)}
}
@keyframes idle{
 0%,100%{transform:translateY(0)}
 50%{transform:translateY(-6px)}
}

/* MAIN */
.main{
 padding:20px;
 display:grid;
 grid-template-columns:1.3fr 1fr;
 grid-template-rows:1fr 1fr;
 gap:20px;
}
.card{
 background:var(--panel);
 border:1px solid var(--border);
 border-radius:36px;
 padding:20px;
 overflow:hidden;
}
h3{font-size:.75rem;letter-spacing:2px;color:#888}

/* TASKS */
.tasks{
 height:100%;
 overflow-y:auto;
 padding-right:6px;
}
.tasks::-webkit-scrollbar{width:4px}
.tasks::-webkit-scrollbar-thumb{background:var(--border)}
.task{
 padding:14px 18px;
 margin-bottom:10px;
 border-radius:18px;
 background:rgba(255,255,255,.05);
 display:flex;
 justify-content:space-between;
}
.done{border-left:4px solid var(--cyan)}
.badge{
 font-size:.65rem;
 padding:6px 14px;
 border-radius:50px;
 font-weight:800;
}
.ok{background:var(--cyan);color:#000}
.wait{background:#aaa;color:#000}

.canvas3d{width:100%;height:100%}
</style>
</head>

<body data-theme="dark">

<div class="app">

<div class="top">
 <div class="logo">STOCK TEAM <span>| VCB</span></div>
 <div>
  <button onclick="toggleTheme()">DARK / LIGHT</button>
  <button onclick="toggleFS()">FULLSCREEN</button>
 </div>
</div>

<div class="clock">
 <div class="clock-card">
  <div class="hourglass" id="hg"><div class="sand"></div></div>
  <div>
   <div id="time">00:00:00</div>
   <div id="date">LOADING…</div>
  </div>
 </div>
</div>

<div class="main">

<div class="card" style="grid-row:span 2">
 <h3>WEEKLY VOLUME · 3D WATERFALL</h3>
 <div id="weekly3d" class="canvas3d"></div>
</div>

<div class="card">
 <h3>COUNTING PROGRESS</h3>
 <div id="donut3d" class="canvas3d"></div>
</div>

<div class="card">
 <h3>DAILY TASKS</h3>
 <div class="tasks" id="tasks"></div>
</div>

</div>
</div>

<script type="module">
import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js";
import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/controls/OrbitControls.js";

/* GLOBAL BUTTONS */
window.toggleTheme=()=>{
 document.body.dataset.theme=
 document.body.dataset.theme==="dark"?"light":"dark";
}
window.toggleFS=()=>{
 if(!document.fullscreenElement)document.documentElement.requestFullscreen();
 else document.exitFullscreen();
}

/* DATA */
const weekly=[6901,5447,4524,2068,1100];
const tasks=[
 {t:"Aged stock report 7AM",s:"Completed"},
 {t:"Aged stock report 3PM",s:"Not started"},
 {t:"Returns Adjustments",s:"Not started"},
 {t:"PI First Count",s:"Not started"},
 {t:"SLA Master Sync",s:"Not started"},
 {t:"High Value Audit",s:"Not started"}
];

/* TASKS */
const tb=document.getElementById("tasks");
tasks.forEach(x=>{
 tb.innerHTML+=`
 <div class="task ${x.s==="Completed"?"done":""}">
  <span>${x.t}</span>
  <span class="badge ${x.s==="Completed"?"ok":"wait"}">${x.s==="Completed"?"READY":"PENDING"}</span>
 </div>`;
});

/* CLOCK + HOURGLASS */
let lastMin=null;
setInterval(()=>{
 const d=new Date();
 time.innerText=d.toLocaleTimeString("en-GB",{hour12:false});
 date.innerText=d.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"});
 if(d.getMinutes()!==lastMin){
  hg.style.animation="flip 1s ease-in-out";
  setTimeout(()=>hg.style.animation="idle 4s infinite",1000);
  lastMin=d.getMinutes();
 }
},1000);

/* WEEKLY WATERFALL */
(function(){
 const el=document.getElementById("weekly3d");
 const s=new THREE.Scene();
 const c=new THREE.PerspectiveCamera(50,el.clientWidth/el.clientHeight,.1,100);
 c.position.set(0,8,16);

 const r=new THREE.WebGLRenderer({alpha:true,antialias:true});
 r.setSize(el.clientWidth,el.clientHeight);
 el.appendChild(r.domElement);

 s.add(new THREE.AmbientLight(0xffffff,.4));
 const l=new THREE.DirectionalLight(0x4fd1c5,1.2);
 l.position.set(5,10,5);s.add(l);

 const max=Math.max(...weekly);
 weekly.forEach((v,i)=>{
  const h=(v/max)*7+.3;
  const m=new THREE.Mesh(
   new THREE.BoxGeometry(1,h,1),
   new THREE.MeshStandardMaterial({color:0x4fd1c5,metalness:.5,roughness:.25})
  );
  m.position.set((i-2)*2,h/2+10,0);
  s.add(m);
  setTimeout(()=>m.position.y=h/2, i*250);
 });

 const o=new OrbitControls(c,r.domElement);
 o.enableZoom=false;o.enableDamping=true;

 (function a(){
  requestAnimationFrame(a);
  o.update();
  r.render(s,c);
 })();
})();

/* DONUT */
(function(){
 const el=document.getElementById("donut3d");
 const s=new THREE.Scene();
 const c=new THREE.PerspectiveCamera(50,el.clientWidth/el.clientHeight,.1,100);
 c.position.z=8;
 const r=new THREE.WebGLRenderer({alpha:true,antialias:true});
 r.setSize(el.clientWidth,el.clientHeight);
 el.appendChild(r.domElement);
 s.add(new THREE.AmbientLight(0xffffff,.5));
 const p=new THREE.PointLight(0xffb703,1.5);
 p.position.set(5,5,5);s.add(p);
 const tor=new THREE.Mesh(
  new THREE.TorusGeometry(2.6,.6,32,160,Math.PI*1.6),
  new THREE.MeshStandardMaterial({color:0xffb703,metalness:.6,roughness:.25})
 );
 s.add(tor);
 (function a(){
  requestAnimationFrame(a);
  tor.rotation.y+=.01;
  r.render(s,c);
 })();
})();
</script>

</body>
</html>
