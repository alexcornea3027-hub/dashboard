<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>VCB | Management Professional</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js" } }
    </script>
    <style>
        :root {
            --bg: #0f1115; --card: #1a1d23;
            --soft-cyan: #70e2ff; --soft-gold: #e2c08d; --soft-mint: #98ffcc;
            --text-main: #e0e6ed; --text-dim: #94a3b8; --border: rgba(255,255,255,0.05);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text-main); height: 100vh; overflow: hidden; }

        .dashboard { display: grid; grid-template-rows: 70px 180px 1fr 280px; gap: 15px; padding: 20px; height: 100vh; }

        /* HEADER PROFESIONAL */
        .header { display: flex; justify-content: space-between; align-items: center; background: var(--card); border-radius: 12px; padding: 0 25px; border: 1px solid var(--border); box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .logo { font-weight: 800; font-size: 1.2rem; letter-spacing: 1px; color: var(--soft-gold); }
        .target-indicator { background: rgba(152, 255, 204, 0.1); color: var(--soft-mint); padding: 8px 20px; border-radius: 6px; font-weight: 700; border: 1px solid rgba(152, 255, 204, 0.2); }
        
        /* CONTAINER CEAS SI CLEPSIDRA */
        .time-engine { display: flex; align-items: center; gap: 15px; }
        #hourglass-container { width: 45px; height: 45px; }
        #clock { font-weight: 600; font-size: 1.4rem; font-variant-numeric: tabular-nums; }

        /* KPI SECTION */
        .kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .kpi-card { background: var(--card); border-radius: 12px; border: 1px solid var(--border); padding: 20px; display: flex; align-items: center; justify-content: space-between; transition: transform 0.3s; }
        .kpi-card:hover { transform: translateY(-3px); border-color: rgba(255,255,255,0.1); }
        .kpi-info h4 { font-size: 0.7rem; text-transform: uppercase; color: var(--text-dim); letter-spacing: 1px; margin-bottom: 8px; }
        .kpi-info .val { font-size: 2.4rem; font-weight: 800; line-height: 1; color: #fff; }
        .chart-3d { width: 100px; height: 100px; }

        /* GRAPHS SECTION */
        .middle-section { display: grid; grid-template-columns: 1.4fr 1fr; gap: 15px; min-height: 0; }
        .panel { background: var(--card); border-radius: 12px; border: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; }
        .panel-header { font-size: 0.75rem; font-weight: 700; color: var(--soft-gold); text-transform: uppercase; margin-bottom: 15px; display: flex; justify-content: space-between; }

        /* TASK LISTS */
        .bottom-section { display: grid; grid-template-columns: 1.5fr 1fr; gap: 15px; min-height: 0; }
        .task-container { overflow-y: auto; padding-right: 10px; }
        .task-container::-webkit-scrollbar { width: 5px; }
        .task-container::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        .task-row { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 14px 18px; background: rgba(255,255,255,0.02); 
            border-radius: 8px; margin-bottom: 8px; border: 1px solid transparent;
            transition: 0.2s;
        }
        .task-row:hover { background: rgba(255,255,255,0.04); }
        .task-row.done { border-left: 4px solid var(--soft-mint); background: rgba(152, 255, 204, 0.03); }
        
        .status-tag { font-size: 0.6rem; font-weight: 800; padding: 5px 12px; border-radius: 4px; text-transform: uppercase; }
        .tag-done { background: var(--soft-mint); color: #0a2e1d; }
        .tag-wait { background: #2d3139; color: #64748b; }
    </style>
</head>
<body>

<div class="dashboard">
    <header class="header">
        <div class="logo">STOCKTEAM <span style="font-weight:300">VCB</span></div>
        <div class="target-indicator">TARGET ZILNIC: 1,193 LOCAȚII</div>
        <div class="time-engine">
            <div id="hourglass-container"></div>
            <div id="clock">00:00:00</div>
        </div>
    </header>

    <div class="kpi-row">
        <div class="kpi-card">
            <div class="kpi-info"><h4>Locații Numărate</h4><div class="val">1,186</div><p style="font-size:0.7rem; color:var(--soft-mint); margin-top:5px;">99.4% din target</p></div>
            <div id="c1" class="chart-3d"></div>
        </div>
        <div class="kpi-card">
            <div class="kpi-info"><h4>Task-uri Zilnice</h4><div class="val">1/5</div><p style="font-size:0.7rem; color:var(--soft-gold); margin-top:5px;">20% Finalizat</p></div>
            <div id="c2" class="chart-3d"></div>
        </div>
        <div class="kpi-card">
            <div class="kpi-info"><h4>Obiective Săptămânale</h4><div class="val">1/3</div><p style="font-size:0.7rem; color:var(--soft-cyan); margin-top:5px;">33% Progres</p></div>
            <div id="c3" class="chart-3d"></div>
        </div>
    </div>

    <div class="middle-section">
        <div class="panel">
            <div class="panel-header">Productivitate pe Zone (Locații/Schimb)</div>
            <div id="area-chart-3d" style="flex:1"></div>
        </div>
        <div class="panel">
            <div class="panel-header">Trend Volum Săptămânal (W30 - W34)</div>
            <div id="trend-chart-3d" style="flex:1"></div>
        </div>
    </div>

    <div class="bottom-section">
        <div class="panel">
            <div class="panel-header">Checklist Zilnic <span>Actualizat Live</span></div>
            <div class="task-container" id="daily-list"></div>
        </div>
        <div class="panel">
            <div class="panel-header">Checklist Săptămânal</div>
            <div class="task-container" id="weekly-list"></div>
        </div>
    </div>
</div>

<script type="module">
    import * as THREE from 'three';

    // DATE REALE
    const state = {
        daily: [
            {t: "Aged stock report 7AM", s: "DONE"}, {t: "Aged stock report 3PM", s: "WAIT"},
            {t: "ADJUSTMENTS (Returns)", s: "WAIT"}, {t: "PI 1st count", s: "WAIT"}, {t: "SLA update", s: "WAIT"}
        ],
        weekly: [
            {t: "Period Shrinkage", s: "DONE"}, {t: "SIS report", s: "WAIT"}, {t: "Weekly ORM", s: "WAIT"}
        ]
    };

    // 1. ENGINE 3D PENTRU DONUT CHARTS (MATE, PROFESIONALE)
    function createDonut(id, color, percent) {
        const el = document.getElementById(id);
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(100, 100); el.appendChild(renderer.domElement);

        const group = new THREE.Group();
        // Segmentul de progres
        const geometry = new THREE.TorusGeometry(10, 2.5, 16, 100, (percent/100) * Math.PI * 2);
        const material = new THREE.MeshStandardMaterial({ color: color, roughness: 0.4, metalness: 0.2 });
        const mesh = new THREE.Mesh(geometry, material);
        mesh.rotation.z = Math.PI / 2;
        group.add(mesh);

        // Inelul de fundal (gri discret)
        const bgGeo = new THREE.TorusGeometry(10, 2.5, 16, 100);
        const bgMat = new THREE.MeshBasicMaterial({ color: 0x333b45, transparent: true, opacity: 0.3 });
        group.add(new THREE.Mesh(bgGeo, bgMat));

        scene.add(group, new THREE.AmbientLight(0xffffff, 1));
        const pL = new THREE.PointLight(0xffffff, 50); pL.position.set(10,10,10); scene.add(pL);
        camera.position.z = 28;

        function anim() { requestAnimationFrame(anim); group.rotation.y += 0.005; renderer.render(scene, camera); }
        anim();
    }

    // 2. CLEPSIDRĂ CU PARTICULE (CULORI CALDE)
    function initHourglass() {
        const container = document.getElementById('hourglass-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(45, 45); container.appendChild(renderer.domElement);

        const glassGeo = new THREE.OctahedronGeometry(2);
        const glassMat = new THREE.MeshStandardMaterial({ color: 0xe2c08d, wireframe: true });
        const glass = new THREE.Mesh(glassGeo, glassMat);
        scene.add(glass);
        
        scene.add(new THREE.AmbientLight(0xffffff, 1));
        camera.position.z = 8;

        function anim() { 
            requestAnimationFrame(anim); 
            glass.rotation.y += 0.015; 
            glass.rotation.z += 0.01;
            renderer.render(scene, camera); 
        }
        anim();
    }

    // 3. RENDER LISTE TASK-URI
    function renderTasks() {
        const dL = document.getElementById('daily-list');
        const wL = document.getElementById('weekly-list');
        
        const template = (list) => list.map(item => `
            <div class="task-row ${item.s === 'DONE' ? 'done' : ''}">
                <span style="font-weight:600; font-size:0.85rem;">${item.t}</span>
                <span class="status-tag ${item.s === 'DONE' ? 'tag-done' : 'tag-wait'}">${item.s}</span>
            </div>
        `).join('');

        dL.innerHTML = template(state.daily);
        wL.innerHTML = template(state.weekly);
    }

    // 4. CEAS
    setInterval(() => {
        document.getElementById('clock').innerText = new Date().toLocaleTimeString('ro-RO', {hour12: false});
    }, 1000);

    window.onload = () => {
        createDonut('c1', 0x98ffcc, 99);
        createDonut('c2', 0xe2c08d, 20);
        createDonut('c3', 0x70e2ff, 33);
        initHourglass();
        renderTasks();
    };
</script>
</body>
</html>
